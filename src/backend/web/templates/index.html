{% extends "base.html" %}

{% load static %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è ‚Äî Knowledge Vault{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/index.css' %}">
{% endblock %}

{% block content %}
<div class="welcome-header">
    <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Knowledge Vault!</h1>
</div>

{% if user.is_authenticated %}
    {% if just_logged_in %}
        <p class="welcome-message">üéâ –í—ã —É—Å–ø–µ—à–Ω–æ –≤–æ—à–ª–∏ –≤ —Å–∏—Å—Ç–µ–º—É! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω–æ, {{ user.username }}.</p>
    {% endif %}

    <div class="grid">
        <!-- TODO Block -->
        <div class="card">
            <div class="card-header">
                <h2>üìã TODO</h2>
                <!-- <a class="btn primary" href=" url 'tasks' ">+ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</a> -->
                <a class="btn primary" href="#">+ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</a>
                <a class="btn primary" href="{% url 'add_task' %}">+ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</a>
            </div>
            <ul class="task-list">
                {% for task in tasks %}
                    <li class="task-item">
                        <div class="task-info">
                            <div class="task-name">{{ task.name }}</div>
                            <div class="task-meta">
                                {% if task.end_time %}
                                    ‚è∞ –¥–æ {{ task.end_time|date:"d.m.Y H:i" }}
                                {% endif %}
                            </div>
                            {% if task.tags.all %}
                                <div class="task-tags">
                                    {% for tag in task.tags.all %}
                                        <span class="tag">{{ tag.name }}</span>
                                    {% endfor %}
                                </div>
                            {% endif %}
                        </div>
                    </li>
                {% empty %}
                    <div class="empty-state">
                        <p>–ù–µ—Ç –∑–∞–¥–∞—á. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é!</p>
                    </div>
                {% endfor %}
            </ul>
        </div>

        <!-- Documents Block -->
        <div class="card">
            <div class="card-header">
                <h2>üìÅ –î–æ–∫—É–º–µ–Ω—Ç—ã</h2>
                <!-- <a class="btn primary" href=" url 'upload_document' ">+ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª</a> -->
                <a class="btn primary" href="#">+ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª</a>
                <a class="btn primary" href="{% url 'upload_document' %}">+ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª</a>
            </div>
            <ul class="doc-list">
                {% for doc in documents %}
                    <li class="doc-item">
                        <div class="doc-info">
                            <div class="doc-name">üìÑ {{ doc.name }}</div>
                            <div class="doc-meta">
                                .{{ doc.extension }} ‚Ä¢ {{ doc.uploaded_at|date:"d.m.Y" }}
                            </div>
                        </div>
                    </li>
                {% empty %}
                    <div class="empty-state">
                        <p>–ù–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø–µ—Ä–≤—ã–π!</p>
                    </div>
                {% endfor %}
            </ul>
        </div>
    </div>
{% else %}
    <div class="guest-message">
        <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Knowledge Vault –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–∏–º–∏ –∑–∞–¥–∞—á–∞–º–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏.</p>
        <div class="guest-actions">
            <a class="btn" href="{% url 'login' %}">–í–æ–π—Ç–∏</a>
            <a class="btn primary" href="{% url 'register' %}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
        </div>
    </div>
{% endif %}
{% endblock %}